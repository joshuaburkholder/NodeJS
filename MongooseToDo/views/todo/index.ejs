<ul>
  <% todos.forEach(function(todo) { %>
    <li class="todo">
      <span><%=todo.name%></span>
      <input class="edit" data-id="<%=todo.id%>" style="display:none" value="<%=todo.name%>" />
      <input class="edit" data-id="<%=todo.priority%>" style="display:none" value="<%=todo.priority%> />"
    </li>
  <% }); %>
</ul>

<form method="post" action="/">
  <input autofocus name="name" />
  <input type="number" name="priority" placeholder="priority" step="1" min="1" max="10">
  <button type="submit">Add To Do</button>
</form>

<script>
  $('.todo').on('dblclick', function(event){
    var self = $(this),
        input = self.find('input'),
        span = self.find('span');
        span.hide();
        input.show();
  });

  $('edit').on('blur', function(event){
    var self = $(this),
        span = self.siblings('span'),
        request = $.ajax({
          type:"PUT",
          data:{name:self.val()},
          url:'/' + self.attr('data-id') 
        });
    request.done(function(){
        self.hide();
        span.text(self.val()).show();
    });
  });

</script>